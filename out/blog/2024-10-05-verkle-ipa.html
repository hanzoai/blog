<!DOCTYPE html><html lang="en" class="__variable_245d8d __variable_97c177 antialiased"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/27834908180db20f-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/78fec81b34c4a365.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/f9ac0d9b8ca39c52.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-19293e76a0797e5c.js"/><script src="/_next/static/chunks/8b8ad143-e83b7b49f5b24ad0.js" async=""></script><script src="/_next/static/chunks/766-52c0c652dbe24189.js" async=""></script><script src="/_next/static/chunks/main-app-e8025b732b0b8d44.js" async=""></script><script src="/_next/static/chunks/933-166e0fcc9496c98f.js" async=""></script><script src="/_next/static/chunks/app/layout-47e4a7ab857a36d7.js" async=""></script><script src="/_next/static/chunks/771-2096a43097a1ac56.js" async=""></script><script src="/_next/static/chunks/698-980099c394b58d6f.js" async=""></script><script src="/_next/static/chunks/218-3bb2d990159730f8.js" async=""></script><script src="/_next/static/chunks/app/blog/%5Bslug%5D/page-b595d014fe271b46.js" async=""></script><meta name="next-size-adjust" content=""/><meta name="theme-color" content="black"/><title>Verkle Trees: IPA on Bandersnatch in Go - Hanzo Blog</title><meta name="description" content="Inner Product Arguments on the Bandersnatch/Banderwagon curve for Verkle trees: Fiat-Shamir transcript labels, 8 rounds, barycentric coefficients, and amd64 assembly for Montgomery field operations."/><link rel="author" href="https://hanzo.blog"/><meta name="author" content="Hanzo AI"/><meta name="keywords" content="Verkle Trees: IPA on Bandersnatch in Go,verkle-trees,ipa,bandersnatch,zero-knowledge,cryptography,go,Hanzo AI,Blog,AI Research,Infrastructure"/><meta name="creator" content="Hanzo AI"/><meta name="publisher" content="Hanzo AI"/><meta name="robots" content="index, follow"/><meta name="googlebot" content="index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1"/><link rel="canonical" href="https://hanzo.blog/blog/2024-10-05-verkle-ipa"/><meta property="og:title" content="Verkle Trees: IPA on Bandersnatch in Go"/><meta property="og:description" content="Inner Product Arguments on the Bandersnatch/Banderwagon curve for Verkle trees: Fiat-Shamir transcript labels, 8 rounds, barycentric coefficients, and amd64 assembly for Montgomery field operations."/><meta property="og:url" content="https://hanzo.blog/blog/2024-10-05-verkle-ipa"/><meta property="og:site_name" content="Hanzo Blog"/><meta property="og:image" content="https://hanzo.blog/blog/2024-10-05-verkle-ipa/opengraph-image"/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="630"/><meta property="og:image:alt" content="Verkle Trees: IPA on Bandersnatch in Go"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2024-10-05"/><meta property="article:author" content="Hanzo AI"/><meta property="article:tag" content="verkle-trees"/><meta property="article:tag" content="ipa"/><meta property="article:tag" content="bandersnatch"/><meta property="article:tag" content="zero-knowledge"/><meta property="article:tag" content="cryptography"/><meta property="article:tag" content="go"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@hanzoai"/><meta name="twitter:creator" content="@hanzoai"/><meta name="twitter:title" content="Verkle Trees: IPA on Bandersnatch in Go"/><meta name="twitter:description" content="Inner Product Arguments on the Bandersnatch/Banderwagon curve for Verkle trees: Fiat-Shamir transcript labels, 8 rounds, barycentric coefficients, and amd64 assembly for Montgomery field operations."/><meta name="twitter:image" content="https://hanzo.blog/blog/2024-10-05-verkle-ipa/opengraph-image"/><script>document.querySelectorAll('body link[rel="icon"], body link[rel="apple-touch-icon"]').forEach(el => document.head.appendChild(el))</script><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body><div hidden=""><!--$--><!--/$--></div><script>((e,t,r,n,o,a,i,l)=>{let s=document.documentElement,u=["light","dark"];function c(t){var r;(Array.isArray(e)?e:[e]).forEach(e=>{let r="class"===e,n=r&&a?o.map(e=>a[e]||e):o;r?(s.classList.remove(...n),s.classList.add(a&&a[t]?a[t]:t)):s.setAttribute(e,t)}),r=t,l&&u.includes(r)&&(s.style.colorScheme=r)}if(n)c(n);else try{let e=localStorage.getItem(t)||r,n=i&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e;c(n)}catch(e){}})("class","theme","dark",null,["light","dark"],null,true,true)</script><header class="border-b border-border/50 px-6 py-4 sticky top-0 z-20 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60"><div class="max-w-5xl mx-auto flex items-center justify-between"><a href="https://hanzo.ai" class="flex items-center gap-2 text-foreground hover:opacity-80 transition-opacity"><img alt="Hanzo" loading="lazy" width="20" height="20" decoding="async" data-nimg="1" class="dark:invert-0 invert" style="color:transparent" src="/hanzo-logo.svg"/><span class="font-semibold text-base tracking-tight">hanzo</span><span class="text-muted-foreground text-sm">/ blog</span></a><nav class="flex items-center gap-4 text-sm text-muted-foreground"><a href="https://hanzo.ai" class="hover:text-foreground transition-colors">hanzo.ai</a><a href="https://hanzo.help" class="hover:text-foreground transition-colors hidden sm:block">Help</a><a href="https://discord.gg/hanzo" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full border border-border text-foreground hover:bg-accent transition-all text-sm font-medium"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-message-circle h-3.5 w-3.5" aria-hidden="true"><path d="M7.9 20A9 9 0 1 0 4 16.1L2 22Z"></path></svg>Discord</a></nav></div></header><div class="min-h-screen bg-background relative"><div class="absolute top-0 left-0 z-0 w-full h-[200px] [mask-image:linear-gradient(to_top,transparent_25%,black_95%)]"><div class="absolute top-0 left-0 size-full"><canvas class="pointer-events-none" style="width:0;height:0"></canvas></div></div><div class="space-y-4 border-b border-border relative z-10"><div class="max-w-7xl mx-auto flex flex-col gap-6 p-6"><div class="flex flex-wrap items-center gap-3 gap-y-5 text-sm text-muted-foreground"><a class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50 px-4 py-2 has-[&gt;svg]:px-3 h-6 w-6" href="/"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-left w-4 h-4" aria-hidden="true"><path d="m12 19-7-7 7-7"></path><path d="M19 12H5"></path></svg><span class="sr-only">Back to all articles</span></a><div class="flex flex-wrap gap-3 text-muted-foreground"><span class="h-6 w-fit px-3 text-sm font-medium bg-muted text-muted-foreground rounded-md border flex items-center justify-center">verkle-trees</span><span class="h-6 w-fit px-3 text-sm font-medium bg-muted text-muted-foreground rounded-md border flex items-center justify-center">ipa</span><span class="h-6 w-fit px-3 text-sm font-medium bg-muted text-muted-foreground rounded-md border flex items-center justify-center">bandersnatch</span><span class="h-6 w-fit px-3 text-sm font-medium bg-muted text-muted-foreground rounded-md border flex items-center justify-center">zero-knowledge</span><span class="h-6 w-fit px-3 text-sm font-medium bg-muted text-muted-foreground rounded-md border flex items-center justify-center">cryptography</span><span class="h-6 w-fit px-3 text-sm font-medium bg-muted text-muted-foreground rounded-md border flex items-center justify-center">go</span></div><time class="font-medium text-muted-foreground">October 4, 2024</time></div><h1 class="text-4xl md:text-5xl lg:text-6xl font-medium tracking-tighter text-balance">Verkle Trees: IPA on Bandersnatch in Go</h1><p class="text-muted-foreground max-w-4xl md:text-lg md:text-balance">Inner Product Arguments on the Bandersnatch/Banderwagon curve for Verkle trees: Fiat-Shamir transcript labels, 8 rounds, barycentric coefficients, and amd64 assembly for Montgomery field operations.</p></div></div><div class="flex divide-x divide-border relative max-w-7xl mx-auto px-4 md:px-0 z-10"><div class="absolute max-w-7xl mx-auto left-1/2 -translate-x-1/2 w-[calc(100%-2rem)] lg:w-full h-full border-x border-border p-0 pointer-events-none"></div><main class="w-full p-0 overflow-hidden"><div class="p-6 lg:p-10"><div class="prose dark:prose-invert max-w-none prose-headings:scroll-mt-8 prose-headings:font-semibold prose-a:no-underline prose-headings:tracking-tight prose-headings:text-balance prose-p:tracking-tight prose-p:text-balance prose-lg"><div class="prose"><p>Verkle trees are the planned replacement for Merkle-Patricia tries in Ethereum state storage. The core advantage: proof size scales with O(1) per level rather than O(k) where k is the width of each node. A Verkle proof for a single key in a tree with branching factor 256 is far smaller than the corresponding Merkle proof.</p>
<p>The Lux crypto library implements the Inner Product Argument (IPA) over the Bandersnatch curve, the component that makes Verkle tree proofs work.</p>
<h2 id="bandersnatch-and-banderwagon" class="group relative scroll-mt-20 cursor-pointer hover:text-muted-foreground transition-colors duration-200 flex items-center gap-2" title="Click to copy link to this section">Bandersnatch and Banderwagon<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-link w-4 h-4 opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex-shrink-0" aria-hidden="true"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h2>
<p>Bandersnatch is a twisted Edwards curve defined over the BLS12-381 scalar field. Its specific structure makes it efficient for IPA-based vector commitments. Banderwagon is the prime-order subgroup of Bandersnatch — using Banderwagon avoids small-subgroup attacks without requiring explicit cofactor clearing on every operation.</p>
<p>The choice of Bandersnatch for Verkle trees is deliberate: the curve was designed by the Ethereum Foundation specifically for this use case. Its arithmetic is faster than Pedersen commitments over BN254 for the vector sizes needed in Ethereum state proofs.</p>
<h2 id="the-inner-product-argument" class="group relative scroll-mt-20 cursor-pointer hover:text-muted-foreground transition-colors duration-200 flex items-center gap-2" title="Click to copy link to this section">The Inner Product Argument<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-link w-4 h-4 opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex-shrink-0" aria-hidden="true"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h2>
<p>An IPA is a proof system for the relation: given a commitment C to a vector <strong>a</strong>, and a public point <strong>b</strong>, prove that ⟨<strong>a</strong>, <strong>b</strong>⟩ = z without revealing <strong>a</strong>.</p>
<p>In the Verkle tree context, C is a polynomial commitment (the node&#x27;s hash), <strong>b</strong> encodes the evaluation point (the next byte of the key path), and z is the committed value at that point. Verifying the IPA proves that the committed polynomial evaluates to the claimed value at the claimed point.</p>
<p>The Lux IPA runs for 8 rounds. Each round halves the witness size by folding the vector using a random challenge. After 8 rounds, the witness is a constant-size proof regardless of the original vector length (up to 256 elements).</p>
<h2 id="fiat-shamir-transcript" class="group relative scroll-mt-20 cursor-pointer hover:text-muted-foreground transition-colors duration-200 flex items-center gap-2" title="Click to copy link to this section">Fiat-Shamir Transcript<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-link w-4 h-4 opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex-shrink-0" aria-hidden="true"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h2>
<p>The protocol is made non-interactive via Fiat-Shamir transformation. The prover computes challenges by hashing the transcript so far. The transcript labels used in the Lux implementation:</p>
<ul>
<li><code>ipa</code>: domain separator for the IPA protocol</li>
<li><code>C</code>: commitment to the vector</li>
<li><code>input point</code>: the evaluation point</li>
<li><code>output point</code>: the evaluation result</li>
<li><code>w</code>: random scalar for combining the inner product relation</li>
<li><code>L</code>: left cross-commitment in each round</li>
<li><code>R</code>: right cross-commitment in each round</li>
<li><code>x</code>: the round challenge derived from L and R</li>
</ul>
<p>These labels are not arbitrary strings. They are the transcript labels that bind each challenge to the specific protocol step that generated it. A verifier replays the Fiat-Shamir computation using the same labels and obtains the same challenges as the prover. Any deviation — a different label, a different order of transcript elements — produces a different challenge, causing the proof to fail verification.</p>
<p>The labels need to be stable across implementations. Any client that generates IPA proofs for the Lux network must use exactly these strings.</p>
<h2 id="barycentric-coefficients" class="group relative scroll-mt-20 cursor-pointer hover:text-muted-foreground transition-colors duration-200 flex items-center gap-2" title="Click to copy link to this section">Barycentric Coefficients<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-link w-4 h-4 opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex-shrink-0" aria-hidden="true"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h2>
<p>Verkle tree evaluation uses barycentric interpolation. Given a polynomial committed via its evaluations at a predefined set of points (the domain), evaluate at an arbitrary new point using barycentric weights.</p>
<p>Barycentric evaluation is numerically efficient — O(n) versus O(n²) for naive Lagrange interpolation — and has a straightforward formula. The Lux implementation precomputes barycentric weights for the standard domain (256 elements for the Verkle tree branching factor) once at initialization and caches them.</p>
<h2 id="amd64-assembly-for-montgomery-arithmetic" class="group relative scroll-mt-20 cursor-pointer hover:text-muted-foreground transition-colors duration-200 flex items-center gap-2" title="Click to copy link to this section">amd64 Assembly for Montgomery Arithmetic<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-link w-4 h-4 opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex-shrink-0" aria-hidden="true"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h2>
<p>The Montgomery field arithmetic — the modular multiplication algorithm used in all the field operations underlying Bandersnatch arithmetic — has an amd64 assembly implementation. Montgomery multiplication on modern x86 CPUs involves MULQ and ADCQ instructions that the compiler cannot fully optimize from Go source. The assembly implementation uses MULQ directly and avoids intermediate allocations.</p>
<p>The assembly is in <code>ipa/field_amd64.s</code> with corresponding declarations in <code>field_amd64.go</code>. Non-amd64 targets use the pure-Go fallback.</p>
<h2 id="why-this-matters" class="group relative scroll-mt-20 cursor-pointer hover:text-muted-foreground transition-colors duration-200 flex items-center gap-2" title="Click to copy link to this section">Why This Matters<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-link w-4 h-4 opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex-shrink-0" aria-hidden="true"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h2>
<p>Verkle trees reduce Ethereum witness sizes from hundreds of kilobytes (for Merkle proofs on a wide trie) to a few kilobytes. Smaller witnesses mean stateless clients are feasible — a node can verify a block without storing the entire state trie by receiving and verifying a witness for each state access.</p>
<p>The IPA implementation in the Lux crypto library is the cryptographic layer for this capability. The Fiat-Shamir transcript labels, the 8-round structure, the Bandersnatch curve choice, and the assembly optimization are all serving the same goal: small, fast, verifiable proofs of Verkle tree membership.</p>
<p>The amd64 assembly is the last mile. A correct, slow IPA implementation is a research artifact. A correct, fast implementation is production infrastructure.</p></div></div></div><div class="mt-10"><section class="border-t border-border p-0"><div class="p-6 lg:p-10"><h2 class="text-2xl font-medium mb-8">Read more</h2><div class="flex flex-col gap-8"><a class="group grid grid-cols-1 lg:grid-cols-12 items-center gap-4 cursor-pointer" href="/blog/2023-09-05-poseidon2-metal-gpu"><div class="space-y-2 flex-1 col-span-1 lg:col-span-8"><h3 class="text-lg group-hover:underline underline-offset-4 font-semibold text-card-foreground group-hover:text-primary transition-colors line-clamp-2">Poseidon2 on Apple Silicon: GPU-Accelerated ZK Hashing</h3><p class="text-muted-foreground text-sm line-clamp-3 group-hover:underline underline-offset-4">Poseidon2 (BN254 field) in the Lux crypto library, Metal GPU acceleration on Apple Silicon, the 64-element GPU threshold, and the full API for ZK Merkle trees: HashPair, MerkleRoot, VerifyProof, Commitment, Nullifier.</p><time class="block text-xs font-medium text-muted-foreground">September 4, 2023</time></div></a><a class="group grid grid-cols-1 lg:grid-cols-12 items-center gap-4 cursor-pointer" href="/blog/2026-02-28-zeekay-full-arc"><div class="space-y-2 flex-1 col-span-1 lg:col-span-8"><h3 class="text-lg group-hover:underline underline-offset-4 font-semibold text-card-foreground group-hover:text-primary transition-colors line-clamp-2">The Open Stack: 700 Repositories, One Thesis</h3><p class="text-muted-foreground text-sm line-clamp-3 group-hover:underline underline-offset-4">What gets built when the design principle is: computation should not be owned. Commerce infrastructure, AI models, cryptographic protocols, settlement infrastructure — all open, all running.</p><time class="block text-xs font-medium text-muted-foreground">February 27, 2026</time></div></a><a class="group grid grid-cols-1 lg:grid-cols-12 items-center gap-4 cursor-pointer" href="/blog/2026-02-19-hanzo-mpc"><div class="space-y-2 flex-1 col-span-1 lg:col-span-8"><h3 class="text-lg group-hover:underline underline-offset-4 font-semibold text-card-foreground group-hover:text-primary transition-colors line-clamp-2">Hanzo MPC: Threshold Signing for AI-Native Applications</h3><p class="text-muted-foreground text-sm line-clamp-3 group-hover:underline underline-offset-4">Hanzo MPC provides CGGMP21, FROST, and LSS threshold signing as infrastructure — enabling AI agents, wallets, and multi-party systems to sign transactions without any single party holding a complete private key.</p><time class="block text-xs font-medium text-muted-foreground">February 18, 2026</time></div></a></div></div></section></div></main><aside class="hidden lg:block w-[350px] flex-shrink-0 p-6 lg:p-10 bg-muted/60 dark:bg-muted/20"><div class="sticky top-20 space-y-8"><div class="flex items-start gap-2"><div class="flex-1"><h3 class="text-sm tracking-tight text-balance font-semibold">Hanzo AI</h3></div></div><div class="border border-border rounded-lg p-6 bg-card"></div></div></aside></div><button type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-«Rltrlb»" data-state="closed" class="lg:hidden fixed bottom-6 right-6 z-50 bg-primary text-primary-foreground p-3 rounded-full shadow-lg hover:bg-primary/90 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-list" aria-hidden="true"><path d="M3 12h.01"></path><path d="M3 18h.01"></path><path d="M3 6h.01"></path><path d="M8 12h13"></path><path d="M8 18h13"></path><path d="M8 6h13"></path></svg></button></div><!--$--><!--/$--><footer class="border-t border-border/50 px-6 py-6 mt-auto"><div class="max-w-5xl mx-auto flex flex-col sm:flex-row items-center justify-between gap-4 text-sm text-muted-foreground"><div class="flex items-center gap-2"><img alt="Hanzo" loading="lazy" width="16" height="16" decoding="async" data-nimg="1" class="dark:invert-0 invert opacity-50" style="color:transparent" src="/hanzo-logo.svg"/><span>© 2025 Hanzo AI, Inc. Techstars &#x27;17.</span></div><div class="flex items-center gap-4"><a href="https://hanzo.ai/privacy" class="hover:text-foreground transition-colors">Privacy</a><a href="https://hanzo.ai/terms" class="hover:text-foreground transition-colors">Terms</a><a href="https://hanzo.ai/contact" class="hover:text-foreground transition-colors">Contact</a><a href="https://github.com/hanzoai" target="_blank" rel="noopener noreferrer" class="hover:text-foreground transition-colors">GitHub</a></div></div></footer><script src="/_next/static/chunks/webpack-19293e76a0797e5c.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[2710,[\"933\",\"static/chunks/933-166e0fcc9496c98f.js\",\"177\",\"static/chunks/app/layout-47e4a7ab857a36d7.js\"],\"ThemeProvider\"]\n3:I[9933,[\"771\",\"static/chunks/771-2096a43097a1ac56.js\",\"933\",\"static/chunks/933-166e0fcc9496c98f.js\",\"698\",\"static/chunks/698-980099c394b58d6f.js\",\"218\",\"static/chunks/218-3bb2d990159730f8.js\",\"953\",\"static/chunks/app/blog/%5Bslug%5D/page-b595d014fe271b46.js\"],\"Image\"]\n4:I[3977,[],\"\"]\n5:I[8765,[],\"\"]\n6:I[4526,[\"771\",\"static/chunks/771-2096a43097a1ac56.js\",\"933\",\"static/chunks/933-166e0fcc9496c98f.js\",\"698\",\"static/chunks/698-980099c394b58d6f.js\",\"218\",\"static/chunks/218-3bb2d990159730f8.js\",\"953\",\"static/chunks/app/blog/%5Bslug%5D/page-b595d014fe271b46.js\"],\"FlickeringGrid\"]\n7:I[1964,[\"771\",\"static/chunks/771-2096a43097a1ac56.js\",\"933\",\"static/chunks/933-166e0fcc9496c98f.js\",\"698\",\"static/chunks/698-980099c394b58d6f.js\",\"218\",\"static/chunks/218-3bb2d990159730f8.js\",\"953\",\"static/chunks/app/blog/%5Bslug%5D/page-b595d014fe271b46.js\"],\"\"]\n9:I[2463,[],\"OutletBoundary\"]\nc:I[373,[],\"AsyncMetadataOutlet\"]\ne:I[2463,[],\"ViewportBoundary\"]\n10:I[2463,[],\"MetadataBoundary\"]\n12:I[680,[],\"\"]\n:HL[\"/_next/static/media/27834908180db20f-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/78fec81b34c4a365.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/css/f9ac0d9b8ca39c52.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"7TcvDMH70e7l25tIfDDQ6\",\"p\":\"\",\"c\":[\"\",\"blog\",\"2024-10-05-verkle-ipa\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"blog\",{\"children\":[[\"slug\",\"2024-10-05-verkle-ipa\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/f9ac0d9b8ca39c52.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"className\":\"__variable_245d8d __variable_97c177 antialiased\",\"suppressHydrationWarning\":true,\"children\":[\"$\",\"body\",null,{\"children\":[\"$\",\"$L2\",null,{\"attribute\":\"class\",\"defaultTheme\":\"dark\",\"enableSystem\":true,\"disableTransitionOnChange\":true,\"children\":[[\"$\",\"header\",null,{\"className\":\"border-b border-border/50 px-6 py-4 sticky top-0 z-20 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60\",\"children\":[\"$\",\"div\",null,{\"className\":\"max-w-5xl mx-auto flex items-center justify-between\",\"children\":[[\"$\",\"a\",null,{\"href\":\"https://hanzo.ai\",\"className\":\"flex items-center gap-2 text-foreground hover:opacity-80 transition-opacity\",\"children\":[[\"$\",\"$L3\",null,{\"src\":\"/hanzo-logo.svg\",\"alt\":\"Hanzo\",\"width\":20,\"height\":20,\"className\":\"dark:invert-0 invert\"}],[\"$\",\"span\",null,{\"className\":\"font-semibold text-base tracking-tight\",\"children\":\"hanzo\"}],[\"$\",\"span\",null,{\"className\":\"text-muted-foreground text-sm\",\"children\":\"/ blog\"}]]}],[\"$\",\"nav\",null,{\"className\":\"flex items-center gap-4 text-sm text-muted-foreground\",\"children\":[[\"$\",\"a\",null,{\"href\":\"https://hanzo.ai\",\"className\":\"hover:text-foreground transition-colors\",\"children\":\"hanzo.ai\"}],[\"$\",\"a\",null,{\"href\":\"https://hanzo.help\",\"className\":\"hover:text-foreground transition-colors hidden sm:block\",\"children\":\"Help\"}],[\"$\",\"a\",null,{\"href\":\"https://discord.gg/hanzo\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"className\":\"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full border border-border text-foreground hover:bg-accent transition-all text-sm font-medium\",\"children\":[[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-message-circle h-3.5 w-3.5\",\"aria-hidden\":\"true\",\"children\":[[\"$\",\"path\",\"vv11sd\",{\"d\":\"M7.9 20A9 9 0 1 0 4 16.1L2 22Z\"}],\"$undefined\"]}],\"Discord\"]}]]}]]}]}],[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"div\",null,{\"className\":\"min-h-screen bg-background flex items-center justify-center w-full z-10\",\"children\":[[\"$\",\"div\",null,{\"className\":\"absolute top-0 left-0 z-0 w-full h-[500px] [mask-image:linear-gradient(to_top,transparent_25%,black_95%)]\",\"children\":[\"$\",\"$L6\",null,{\"className\":\"absolute top-0 left-0 size-full\",\"squareSize\":4,\"gridGap\":6,\"color\":\"#6B7280\",\"maxOpacity\":0.5,\"flickerChance\":0.1}]}],[\"$\",\"div\",null,{\"className\":\"text-center flex flex-col gap-4 max-w-xs mx-auto relative\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"text-8xl font-mono font-bold drop-shadow-lg text-primary\",\"children\":\"404\"}],[\"$\",\"p\",null,{\"className\":\"text-muted-foreground text-base leading-relaxed text-center tracking-tight text-balance\",\"children\":\"Sorry, we couldn't find the page you're looking for. The page might have been moved, deleted, or you entered the wrong URL.\"}],[\"$\",\"$L7\",null,{\"href\":\"/\",\"children\":\"Back to Home\",\"className\":\"inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [\u0026_svg]:pointer-events-none [\u0026_svg:not([class*='size-'])]:size-4 shrink-0 [\u0026_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-xs hover:bg-primary/90 px-4 py-2 has-[\u003esvg]:px-3 w-full rounded-lg h-9 drop-shadow-lg\",\"ref\":null}]]}]]}],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}],[\"$\",\"footer\",null,{\"className\":\"border-t border-border/50 px-6 py-6 mt-auto\",\"children\":[\"$\",\"div\",null,{\"className\":\"max-w-5xl mx-auto flex flex-col sm:flex-row items-center justify-between gap-4 text-sm text-muted-foreground\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex items-center gap-2\",\"children\":[[\"$\",\"$L3\",null,{\"src\":\"/hanzo-logo.svg\",\"alt\":\"Hanzo\",\"width\":16,\"height\":16,\"className\":\"dark:invert-0 invert opacity-50\"}],[\"$\",\"span\",null,{\"children\":\"© 2025 Hanzo AI, Inc. Techstars '17.\"}]]}],[\"$\",\"div\",null,{\"className\":\"flex items-center gap-4\",\"children\":[[\"$\",\"a\",null,{\"href\":\"https://hanzo.ai/privacy\",\"className\":\"hover:text-foreground transition-colors\",\"children\":\"Privacy\"}],[\"$\",\"a\",null,{\"href\":\"https://hanzo.ai/terms\",\"className\":\"hover:text-foreground transition-colors\",\"children\":\"Terms\"}],[\"$\",\"a\",null,{\"href\":\"https://hanzo.ai/contact\",\"className\":\"hover:text-foreground transition-colors\",\"children\":\"Contact\"}],[\"$\",\"a\",null,{\"href\":\"https://github.com/hanzoai\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"className\":\"hover:text-foreground transition-colors\",\"children\":\"GitHub\"}]]}]]}]}]]}]}]}]]}],{\"children\":[\"blog\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"slug\",\"2024-10-05-verkle-ipa\",\"d\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[\"$L8\",null,[\"$\",\"$L9\",null,{\"children\":[\"$La\",\"$Lb\",[\"$\",\"$Lc\",null,{\"promise\":\"$@d\"}]]}]]}],{},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"E5ld4_oCyBzIvGzPakkUGv\",{\"children\":[[\"$\",\"$Le\",null,{\"children\":\"$Lf\"}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}],[\"$\",\"$L10\",null,{\"children\":\"$L11\"}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$12\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"13:\"$Sreact.suspense\"\n14:I[373,[],\"AsyncMetadata\"]\n16:I[9048,[\"771\",\"static/chunks/771-2096a43097a1ac56.js\",\"933\",\"static/chunks/933-166e0fcc9496c98f.js\",\"698\",\"static/chunks/698-980099c394b58d6f.js\",\"218\",\"static/chunks/218-3bb2d990159730f8.js\",\"953\",\"static/chunks/app/blog/%5Bslug%5D/page-b595d014fe271b46.js\"],\"HashScrollHandler\"]\n17:I[4170,[\"771\",\"static/chunks/771-2096a43097a1ac56.js\",\"933\",\"static/chunks/933-166e0fcc9496c98f.js\",\"698\",\"static/chunks/698-980099c394b58d6f.js\",\"218\",\"static/chunks/218-3bb2d990159730f8.js\",\"953\",\"static/chunks/app/blog/%5Bslug%5D/page-b595d014fe271b46.js\"],\"CopyHeader\"]\n18:I[9372,[\"771\",\"static/chunks/771-2096a43097a1ac56.js\",\"933\",\"static/chunks/933-166e0fcc9496c98f.js\",\"698\",\"static/chunks/698-980099c394b58d6f.js\",\"218\",\"static/chunks/218-3bb2d990159730f8.js\",\"953\",\"static/chunks/app/blog/%5Bslug%5D/page-b595d014fe271b46.js\"],\"TableOfContents\"]\n19:I[1413,[\"771\",\"static/chunks/771-2096a43097a1ac56.js\",\"933\",\"static/chunks/933-166e0fcc9496c98f.js\",\"698\",\"static/chunks/698-980099c394b58d6f.js\",\"218\",\"static/chunks/218-3bb2d990159730f8.js\",\"953\",\"static/chunks/app/blog/%5Bslug%5D/page-b595d014fe271b46.js\"],\"MobileTableOfContents\"]\n11:[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$13\",null,{\"fallback\":null,\"children\":[\"$\",\"$L14\",null,{\"promise\":\"$@15\"}]}]}]\n"])</script><script>self.__next_f.push([1,"8:[\"$\",\"div\",null,{\"className\":\"min-h-screen bg-background relative\",\"children\":[[\"$\",\"$L16\",null,{}],[\"$\",\"div\",null,{\"className\":\"absolute top-0 left-0 z-0 w-full h-[200px] [mask-image:linear-gradient(to_top,transparent_25%,black_95%)]\",\"children\":[\"$\",\"$L6\",null,{\"className\":\"absolute top-0 left-0 size-full\",\"squareSize\":4,\"gridGap\":6,\"color\":\"#6B7280\",\"maxOpacity\":0.2,\"flickerChance\":0.05}]}],[\"$\",\"div\",null,{\"className\":\"space-y-4 border-b border-border relative z-10\",\"children\":[\"$\",\"div\",null,{\"className\":\"max-w-7xl mx-auto flex flex-col gap-6 p-6\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex flex-wrap items-center gap-3 gap-y-5 text-sm text-muted-foreground\",\"children\":[[\"$\",\"$L7\",null,{\"href\":\"/\",\"children\":[[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-arrow-left w-4 h-4\",\"aria-hidden\":\"true\",\"children\":[[\"$\",\"path\",\"1l729n\",{\"d\":\"m12 19-7-7 7-7\"}],[\"$\",\"path\",\"x3x0zl\",{\"d\":\"M19 12H5\"}],\"$undefined\"]}],[\"$\",\"span\",null,{\"className\":\"sr-only\",\"children\":\"Back to all articles\"}]],\"className\":\"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [\u0026_svg]:pointer-events-none [\u0026_svg:not([class*='size-'])]:size-4 shrink-0 [\u0026_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50 px-4 py-2 has-[\u003esvg]:px-3 h-6 w-6\",\"ref\":null}],[\"$\",\"div\",null,{\"className\":\"flex flex-wrap gap-3 text-muted-foreground\",\"children\":[[\"$\",\"span\",\"verkle-trees\",{\"className\":\"h-6 w-fit px-3 text-sm font-medium bg-muted text-muted-foreground rounded-md border flex items-center justify-center\",\"children\":\"verkle-trees\"}],[\"$\",\"span\",\"ipa\",{\"className\":\"h-6 w-fit px-3 text-sm font-medium bg-muted text-muted-foreground rounded-md border flex items-center justify-center\",\"children\":\"ipa\"}],[\"$\",\"span\",\"bandersnatch\",{\"className\":\"h-6 w-fit px-3 text-sm font-medium bg-muted text-muted-foreground rounded-md border flex items-center justify-center\",\"children\":\"bandersnatch\"}],[\"$\",\"span\",\"zero-knowledge\",{\"className\":\"h-6 w-fit px-3 text-sm font-medium bg-muted text-muted-foreground rounded-md border flex items-center justify-center\",\"children\":\"zero-knowledge\"}],[\"$\",\"span\",\"cryptography\",{\"className\":\"h-6 w-fit px-3 text-sm font-medium bg-muted text-muted-foreground rounded-md border flex items-center justify-center\",\"children\":\"cryptography\"}],[\"$\",\"span\",\"go\",{\"className\":\"h-6 w-fit px-3 text-sm font-medium bg-muted text-muted-foreground rounded-md border flex items-center justify-center\",\"children\":\"go\"}]]}],[\"$\",\"time\",null,{\"className\":\"font-medium text-muted-foreground\",\"children\":\"October 4, 2024\"}]]}],[\"$\",\"h1\",null,{\"className\":\"text-4xl md:text-5xl lg:text-6xl font-medium tracking-tighter text-balance\",\"children\":\"Verkle Trees: IPA on Bandersnatch in Go\"}],[\"$\",\"p\",null,{\"className\":\"text-muted-foreground max-w-4xl md:text-lg md:text-balance\",\"children\":\"Inner Product Arguments on the Bandersnatch/Banderwagon curve for Verkle trees: Fiat-Shamir transcript labels, 8 rounds, barycentric coefficients, and amd64 assembly for Montgomery field operations.\"}]]}]}],[\"$\",\"div\",null,{\"className\":\"flex divide-x divide-border relative max-w-7xl mx-auto px-4 md:px-0 z-10\",\"children\":[[\"$\",\"div\",null,{\"className\":\"absolute max-w-7xl mx-auto left-1/2 -translate-x-1/2 w-[calc(100%-2rem)] lg:w-full h-full border-x border-border p-0 pointer-events-none\"}],[\"$\",\"main\",null,{\"className\":\"w-full p-0 overflow-hidden\",\"children\":[null,[\"$\",\"div\",null,{\"className\":\"p-6 lg:p-10\",\"children\":[\"$\",\"div\",null,{\"className\":\"prose dark:prose-invert max-w-none prose-headings:scroll-mt-8 prose-headings:font-semibold prose-a:no-underline prose-headings:tracking-tight prose-headings:text-balance prose-p:tracking-tight prose-p:text-balance prose-lg\",\"children\":[\"$\",\"div\",null,{\"ref\":\"$undefined\",\"children\":[[\"$\",\"p\",null,{\"children\":\"Verkle trees are the planned replacement for Merkle-Patricia tries in Ethereum state storage. The core advantage: proof size scales with O(1) per level rather than O(k) where k is the width of each node. A Verkle proof for a single key in a tree with branching factor 256 is far smaller than the corresponding Merkle proof.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"The Lux crypto library implements the Inner Product Argument (IPA) over the Bandersnatch curve, the component that makes Verkle tree proofs work.\"}],\"\\n\",[\"$\",\"$L17\",null,{\"level\":2,\"id\":\"bandersnatch-and-banderwagon\",\"children\":\"Bandersnatch and Banderwagon\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Bandersnatch is a twisted Edwards curve defined over the BLS12-381 scalar field. Its specific structure makes it efficient for IPA-based vector commitments. Banderwagon is the prime-order subgroup of Bandersnatch — using Banderwagon avoids small-subgroup attacks without requiring explicit cofactor clearing on every operation.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"The choice of Bandersnatch for Verkle trees is deliberate: the curve was designed by the Ethereum Foundation specifically for this use case. Its arithmetic is faster than Pedersen commitments over BN254 for the vector sizes needed in Ethereum state proofs.\"}],\"\\n\",[\"$\",\"$L17\",null,{\"level\":2,\"id\":\"the-inner-product-argument\",\"children\":\"The Inner Product Argument\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"An IPA is a proof system for the relation: given a commitment C to a vector \",[\"$\",\"strong\",null,{\"children\":\"a\"}],\", and a public point \",[\"$\",\"strong\",null,{\"children\":\"b\"}],\", prove that ⟨\",[\"$\",\"strong\",null,{\"children\":\"a\"}],\", \",[\"$\",\"strong\",null,{\"children\":\"b\"}],\"⟩ = z without revealing \",[\"$\",\"strong\",null,{\"children\":\"a\"}],\".\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"In the Verkle tree context, C is a polynomial commitment (the node's hash), \",[\"$\",\"strong\",null,{\"children\":\"b\"}],\" encodes the evaluation point (the next byte of the key path), and z is the committed value at that point. Verifying the IPA proves that the committed polynomial evaluates to the claimed value at the claimed point.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"The Lux IPA runs for 8 rounds. Each round halves the witness size by folding the vector using a random challenge. After 8 rounds, the witness is a constant-size proof regardless of the original vector length (up to 256 elements).\"}],\"\\n\",[\"$\",\"$L17\",null,{\"level\":2,\"id\":\"fiat-shamir-transcript\",\"children\":\"Fiat-Shamir Transcript\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"The protocol is made non-interactive via Fiat-Shamir transformation. The prover computes challenges by hashing the transcript so far. The transcript labels used in the Lux implementation:\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"ipa\"}],\": domain separator for the IPA protocol\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"C\"}],\": commitment to the vector\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"input point\"}],\": the evaluation point\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"output point\"}],\": the evaluation result\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"w\"}],\": random scalar for combining the inner product relation\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"L\"}],\": left cross-commitment in each round\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"R\"}],\": right cross-commitment in each round\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"x\"}],\": the round challenge derived from L and R\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"These labels are not arbitrary strings. They are the transcript labels that bind each challenge to the specific protocol step that generated it. A verifier replays the Fiat-Shamir computation using the same labels and obtains the same challenges as the prover. Any deviation — a different label, a different order of transcript elements — produces a different challenge, causing the proof to fail verification.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"The labels need to be stable across implementations. Any client that generates IPA proofs for the Lux network must use exactly these strings.\"}],\"\\n\",[\"$\",\"$L17\",null,{\"level\":2,\"id\":\"barycentric-coefficients\",\"children\":\"Barycentric Coefficients\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Verkle tree evaluation uses barycentric interpolation. Given a polynomial committed via its evaluations at a predefined set of points (the domain), evaluate at an arbitrary new point using barycentric weights.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Barycentric evaluation is numerically efficient — O(n) versus O(n²) for naive Lagrange interpolation — and has a straightforward formula. The Lux implementation precomputes barycentric weights for the standard domain (256 elements for the Verkle tree branching factor) once at initialization and caches them.\"}],\"\\n\",[\"$\",\"$L17\",null,{\"level\":2,\"id\":\"amd64-assembly-for-montgomery-arithmetic\",\"children\":\"amd64 Assembly for Montgomery Arithmetic\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"The Montgomery field arithmetic — the modular multiplication algorithm used in all the field operations underlying Bandersnatch arithmetic — has an amd64 assembly implementation. Montgomery multiplication on modern x86 CPUs involves MULQ and ADCQ instructions that the compiler cannot fully optimize from Go source. The assembly implementation uses MULQ directly and avoids intermediate allocations.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"The assembly is in \",[\"$\",\"code\",null,{\"children\":\"ipa/field_amd64.s\"}],\" with corresponding declarations in \",[\"$\",\"code\",null,{\"children\":\"field_amd64.go\"}],\". Non-amd64 targets use the pure-Go fallback.\"]}],\"\\n\",[\"$\",\"$L17\",null,{\"level\":2,\"id\":\"why-this-matters\",\"children\":\"Why This Matters\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Verkle trees reduce Ethereum witness sizes from hundreds of kilobytes (for Merkle proofs on a wide trie) to a few kilobytes. Smaller witnesses mean stateless clients are feasible — a node can verify a block without storing the entire state trie by receiving and verifying a witness for each state access.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"The IPA implementation in the Lux crypto library is the cryptographic layer for this capability. The Fiat-Shamir transcript labels, the 8-round structure, the Bandersnatch curve choice, and the assembly optimization are all serving the same goal: small, fast, verifiable proofs of Verkle tree membership.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"The amd64 assembly is the last mile. A correct, slow IPA implementation is a research artifact. A correct, fast implementation is production infrastructure.\"}]],\"className\":\"prose\"}]}]}],[\"$\",\"div\",null,{\"className\":\"mt-10\",\"children\":[\"$\",\"section\",null,{\"className\":\"border-t border-border p-0\",\"children\":[\"$\",\"div\",null,{\"className\":\"p-6 lg:p-10\",\"children\":[[\"$\",\"h2\",null,{\"className\":\"text-2xl font-medium mb-8\",\"children\":\"Read more\"}],[\"$\",\"div\",null,{\"className\":\"flex flex-col gap-8\",\"children\":[[\"$\",\"$L7\",\"/blog/2023-09-05-poseidon2-metal-gpu\",{\"href\":\"/blog/2023-09-05-poseidon2-metal-gpu\",\"className\":\"group grid grid-cols-1 lg:grid-cols-12 items-center gap-4 cursor-pointer\",\"children\":[\"$undefined\",[\"$\",\"div\",null,{\"className\":\"space-y-2 flex-1 col-span-1 lg:col-span-8\",\"children\":[[\"$\",\"h3\",null,{\"className\":\"text-lg group-hover:underline underline-offset-4 font-semibold text-card-foreground group-hover:text-primary transition-colors line-clamp-2\",\"children\":\"Poseidon2 on Apple Silicon: GPU-Accelerated ZK Hashing\"}],[\"$\",\"p\",null,{\"className\":\"text-muted-foreground text-sm line-clamp-3 group-hover:underline underline-offset-4\",\"children\":\"Poseidon2 (BN254 field) in the Lux crypto library, Metal GPU acceleration on Apple Silicon, the 64-element GPU threshold, and the full API for ZK Merkle trees: HashPair, MerkleRoot, VerifyProof, Commitment, Nullifier.\"}],[\"$\",\"time\",null,{\"className\":\"block text-xs font-medium text-muted-foreground\",\"children\":\"September 4, 2023\"}]]}]]}],[\"$\",\"$L7\",\"/blog/2026-02-28-zeekay-full-arc\",{\"href\":\"/blog/2026-02-28-zeekay-full-arc\",\"className\":\"group grid grid-cols-1 lg:grid-cols-12 items-center gap-4 cursor-pointer\",\"children\":[\"$undefined\",[\"$\",\"div\",null,{\"className\":\"space-y-2 flex-1 col-span-1 lg:col-span-8\",\"children\":[[\"$\",\"h3\",null,{\"className\":\"text-lg group-hover:underline underline-offset-4 font-semibold text-card-foreground group-hover:text-primary transition-colors line-clamp-2\",\"children\":\"The Open Stack: 700 Repositories, One Thesis\"}],[\"$\",\"p\",null,{\"className\":\"text-muted-foreground text-sm line-clamp-3 group-hover:underline underline-offset-4\",\"children\":\"What gets built when the design principle is: computation should not be owned. Commerce infrastructure, AI models, cryptographic protocols, settlement infrastructure — all open, all running.\"}],[\"$\",\"time\",null,{\"className\":\"block text-xs font-medium text-muted-foreground\",\"children\":\"February 27, 2026\"}]]}]]}],[\"$\",\"$L7\",\"/blog/2026-02-19-hanzo-mpc\",{\"href\":\"/blog/2026-02-19-hanzo-mpc\",\"className\":\"group grid grid-cols-1 lg:grid-cols-12 items-center gap-4 cursor-pointer\",\"children\":[\"$undefined\",[\"$\",\"div\",null,{\"className\":\"space-y-2 flex-1 col-span-1 lg:col-span-8\",\"children\":[[\"$\",\"h3\",null,{\"className\":\"text-lg group-hover:underline underline-offset-4 font-semibold text-card-foreground group-hover:text-primary transition-colors line-clamp-2\",\"children\":\"Hanzo MPC: Threshold Signing for AI-Native Applications\"}],[\"$\",\"p\",null,{\"className\":\"text-muted-foreground text-sm line-clamp-3 group-hover:underline underline-offset-4\",\"children\":\"Hanzo MPC provides CGGMP21, FROST, and LSS threshold signing as infrastructure — enabling AI agents, wallets, and multi-party systems to sign transactions without any single party holding a complete private key.\"}],[\"$\",\"time\",null,{\"className\":\"block text-xs font-medium text-muted-foreground\",\"children\":\"February 18, 2026\"}]]}]]}]]}]]}]}]}]]}],[\"$\",\"aside\",null,{\"className\":\"hidden lg:block w-[350px] flex-shrink-0 p-6 lg:p-10 bg-muted/60 dark:bg-muted/20\",\"children\":[\"$\",\"div\",null,{\"className\":\"sticky top-20 space-y-8\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex items-start gap-2\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex-1\",\"children\":[\"$\",\"h3\",null,{\"className\":\"text-sm tracking-tight text-balance font-semibold\",\"children\":\"Hanzo AI\"}]}]}],[\"$\",\"div\",null,{\"className\":\"border border-border rounded-lg p-6 bg-card\",\"children\":[\"$\",\"$L18\",null,{}]}]]}]}]]}],[\"$\",\"$L19\",null,{}]]}]\n"])</script><script>self.__next_f.push([1,"b:null\n"])</script><script>self.__next_f.push([1,"f:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"2\",{\"name\":\"theme-color\",\"content\":\"black\"}]]\na:null\n"])</script><script>self.__next_f.push([1,"d:{\"metadata\":[[\"$\",\"title\",\"0\",{\"children\":\"Verkle Trees: IPA on Bandersnatch in Go - Hanzo Blog\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Inner Product Arguments on the Bandersnatch/Banderwagon curve for Verkle trees: Fiat-Shamir transcript labels, 8 rounds, barycentric coefficients, and amd64 assembly for Montgomery field operations.\"}],[\"$\",\"link\",\"2\",{\"rel\":\"author\",\"href\":\"https://hanzo.blog\"}],[\"$\",\"meta\",\"3\",{\"name\":\"author\",\"content\":\"Hanzo AI\"}],[\"$\",\"meta\",\"4\",{\"name\":\"keywords\",\"content\":\"Verkle Trees: IPA on Bandersnatch in Go,verkle-trees,ipa,bandersnatch,zero-knowledge,cryptography,go,Hanzo AI,Blog,AI Research,Infrastructure\"}],[\"$\",\"meta\",\"5\",{\"name\":\"creator\",\"content\":\"Hanzo AI\"}],[\"$\",\"meta\",\"6\",{\"name\":\"publisher\",\"content\":\"Hanzo AI\"}],[\"$\",\"meta\",\"7\",{\"name\":\"robots\",\"content\":\"index, follow\"}],[\"$\",\"meta\",\"8\",{\"name\":\"googlebot\",\"content\":\"index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1\"}],[\"$\",\"link\",\"9\",{\"rel\":\"canonical\",\"href\":\"https://hanzo.blog/blog/2024-10-05-verkle-ipa\"}],[\"$\",\"meta\",\"10\",{\"property\":\"og:title\",\"content\":\"Verkle Trees: IPA on Bandersnatch in Go\"}],[\"$\",\"meta\",\"11\",{\"property\":\"og:description\",\"content\":\"Inner Product Arguments on the Bandersnatch/Banderwagon curve for Verkle trees: Fiat-Shamir transcript labels, 8 rounds, barycentric coefficients, and amd64 assembly for Montgomery field operations.\"}],[\"$\",\"meta\",\"12\",{\"property\":\"og:url\",\"content\":\"https://hanzo.blog/blog/2024-10-05-verkle-ipa\"}],[\"$\",\"meta\",\"13\",{\"property\":\"og:site_name\",\"content\":\"Hanzo Blog\"}],[\"$\",\"meta\",\"14\",{\"property\":\"og:image\",\"content\":\"https://hanzo.blog/blog/2024-10-05-verkle-ipa/opengraph-image\"}],[\"$\",\"meta\",\"15\",{\"property\":\"og:image:width\",\"content\":\"1200\"}],[\"$\",\"meta\",\"16\",{\"property\":\"og:image:height\",\"content\":\"630\"}],[\"$\",\"meta\",\"17\",{\"property\":\"og:image:alt\",\"content\":\"Verkle Trees: IPA on Bandersnatch in Go\"}],[\"$\",\"meta\",\"18\",{\"property\":\"og:type\",\"content\":\"article\"}],[\"$\",\"meta\",\"19\",{\"property\":\"article:published_time\",\"content\":\"2024-10-05\"}],[\"$\",\"meta\",\"20\",{\"property\":\"article:author\",\"content\":\"Hanzo AI\"}],[\"$\",\"meta\",\"21\",{\"property\":\"article:tag\",\"content\":\"verkle-trees\"}],[\"$\",\"meta\",\"22\",{\"property\":\"article:tag\",\"content\":\"ipa\"}],[\"$\",\"meta\",\"23\",{\"property\":\"article:tag\",\"content\":\"bandersnatch\"}],[\"$\",\"meta\",\"24\",{\"property\":\"article:tag\",\"content\":\"zero-knowledge\"}],[\"$\",\"meta\",\"25\",{\"property\":\"article:tag\",\"content\":\"cryptography\"}],[\"$\",\"meta\",\"26\",{\"property\":\"article:tag\",\"content\":\"go\"}],[\"$\",\"meta\",\"27\",{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",\"28\",{\"name\":\"twitter:site\",\"content\":\"@hanzoai\"}],[\"$\",\"meta\",\"29\",{\"name\":\"twitter:creator\",\"content\":\"@hanzoai\"}],[\"$\",\"meta\",\"30\",{\"name\":\"twitter:title\",\"content\":\"Verkle Trees: IPA on Bandersnatch in Go\"}],[\"$\",\"meta\",\"31\",{\"name\":\"twitter:description\",\"content\":\"Inner Product Arguments on the Bandersnatch/Banderwagon curve for Verkle trees: Fiat-Shamir transcript labels, 8 rounds, barycentric coefficients, and amd64 assembly for Montgomery field operations.\"}],[\"$\",\"meta\",\"32\",{\"name\":\"twitter:image\",\"content\":\"https://hanzo.blog/blog/2024-10-05-verkle-ipa/opengraph-image\"}]],\"error\":null,\"digest\":\"$undefined\"}\n"])</script><script>self.__next_f.push([1,"15:{\"metadata\":\"$d:metadata\",\"error\":null,\"digest\":\"$undefined\"}\n"])</script></body></html>